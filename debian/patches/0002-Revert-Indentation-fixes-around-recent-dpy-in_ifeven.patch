From 2de19513a4d35249fa0d25805cc6086665c52349 Mon Sep 17 00:00:00 2001
From: Timo Aaltonen <tjaalton@debian.org>
Date: Tue, 20 Dec 2022 16:51:07 +0200
Subject: [PATCH 2/4] Revert "Indentation fixes around recent dpy->in_ifevent
 changes"

This reverts commit 70eaf1174e2809d1a6c43868d53f8cd844ef636a.
---
 src/ChkIfEv.c  |  6 +++---
 src/IfEvent.c  |  6 +++---
 src/OpenDis.c  |  2 +-
 src/PeekIfEv.c |  4 ++--
 src/locking.c  | 16 ++++++++--------
 5 files changed, 17 insertions(+), 17 deletions(-)

diff --git a/src/ChkIfEv.c b/src/ChkIfEv.c
index eba36941..1bbcba5b 100644
--- a/src/ChkIfEv.c
+++ b/src/ChkIfEv.c
@@ -49,8 +49,8 @@ Bool XCheckIfEvent (
 	unsigned long qe_serial = 0;
 	int n;			/* time through count */
 
-	dpy->in_ifevent++;
-	LockDisplay(dpy);
+        dpy->in_ifevent++;
+        LockDisplay(dpy);
 	prev = NULL;
 	for (n = 3; --n >= 0;) {
 	    for (qelt = prev ? prev->next : dpy->head;
@@ -80,7 +80,7 @@ Bool XCheckIfEvent (
 		/* another thread has snatched this event */
 		prev = NULL;
 	}
-	dpy->in_ifevent--;
+        dpy->in_ifevent--;
 	UnlockDisplay(dpy);
 	return False;
 }
diff --git a/src/IfEvent.c b/src/IfEvent.c
index 54c37f00..593e7acf 100644
--- a/src/IfEvent.c
+++ b/src/IfEvent.c
@@ -48,8 +48,8 @@ XIfEvent (
 	register _XQEvent *qelt, *prev;
 	unsigned long qe_serial = 0;
 
-	dpy->in_ifevent++;
-	LockDisplay(dpy);
+        dpy->in_ifevent++;
+        LockDisplay(dpy);
 	prev = NULL;
 	while (1) {
 	    for (qelt = prev ? prev->next : dpy->head;
@@ -60,7 +60,7 @@ XIfEvent (
 		    *event = qelt->event;
 		    _XDeq(dpy, prev, qelt);
 		    _XStoreEventCookie(dpy, event);
-		    dpy->in_ifevent--;
+                    dpy->in_ifevent--;
 		    UnlockDisplay(dpy);
 		    return 0;
 		}
diff --git a/src/OpenDis.c b/src/OpenDis.c
index 7c8d4e1a..17dc4cb2 100644
--- a/src/OpenDis.c
+++ b/src/OpenDis.c
@@ -189,7 +189,7 @@ XOpenDisplay (
 	dpy->xcmisc_opcode	= 0;
 	dpy->xkb_info		= NULL;
 	dpy->exit_handler_data	= NULL;
-	dpy->in_ifevent         = 0;
+        dpy->in_ifevent         = 0;
 
 /*
  * Setup other information in this display structure.
diff --git a/src/PeekIfEv.c b/src/PeekIfEv.c
index 68c028b7..7e09c00b 100644
--- a/src/PeekIfEv.c
+++ b/src/PeekIfEv.c
@@ -49,7 +49,7 @@ XPeekIfEvent (
 	register _XQEvent *prev, *qelt;
 	unsigned long qe_serial = 0;
 
-	dpy->in_ifevent++;
+        dpy->in_ifevent++;
 	LockDisplay(dpy);
 	prev = NULL;
 	while (1) {
@@ -64,7 +64,7 @@ XPeekIfEvent (
 			_XStoreEventCookie(dpy, &copy);
 			*event = copy;
 		    }
-		    dpy->in_ifevent--;
+                    dpy->in_ifevent--;
 		    UnlockDisplay(dpy);
 		    return 0;
 		}
diff --git a/src/locking.c b/src/locking.c
index c550603e..690b2bf6 100644
--- a/src/locking.c
+++ b/src/locking.c
@@ -486,12 +486,12 @@ static void _XIfEventUnlockDisplay(
     )
 {
     if (dpy->in_ifevent == 0) {
-	dpy->lock_fns->lock_display = _XLockDisplay;
-	dpy->lock_fns->unlock_display = _XUnlockDisplay;
-	dpy->lock->internal_lock_display = _XInternalLockDisplay;
-	UnlockDisplay(dpy);
+        dpy->lock_fns->lock_display = _XLockDisplay;
+        dpy->lock_fns->unlock_display = _XUnlockDisplay;
+        dpy->lock->internal_lock_display = _XInternalLockDisplay;
+        UnlockDisplay(dpy);
     } else
-	return;
+        return;
 }
 
 static void _XLockDisplay(
@@ -521,9 +521,9 @@ static void _XLockDisplay(
     _XIDHandler(dpy);
     _XSeqSyncFunction(dpy);
     if (dpy->in_ifevent) {
-	dpy->lock_fns->lock_display = _XIfEventLockDisplay;
-	dpy->lock_fns->unlock_display = _XIfEventUnlockDisplay;
-	dpy->lock->internal_lock_display = _XIfEventInternalLockDisplay;
+        dpy->lock_fns->lock_display = _XIfEventLockDisplay;
+        dpy->lock_fns->unlock_display = _XIfEventUnlockDisplay;
+        dpy->lock->internal_lock_display = _XIfEventInternalLockDisplay;
     }
 }
 
-- 
2.37.2

